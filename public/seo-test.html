<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEOåŠŸèƒ½å¿«é€ŸéªŒè¯</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .test-item { margin: 10px 0; padding: 10px; border: 1px solid #ddd; border-radius: 5px; }
        .success { background: #d4edda; border-color: #c3e6cb; }
        .error { background: #f8d7da; border-color: #f5c6cb; }
        .warning { background: #fff3cd; border-color: #ffeaa7; }
        button { background: #007cba; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; margin: 5px; }
        button:hover { background: #005a87; }
        pre { background: #f8f9fa; padding: 10px; border-radius: 4px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>ğŸ” SEOåŠŸèƒ½å¿«é€ŸéªŒè¯</h1>
    
    <div class="test-item">
        <h3>1. åŸºç¡€æ–‡ä»¶æ£€æŸ¥</h3>
        <button onclick="checkBasicFiles()">æ£€æŸ¥åŸºç¡€æ–‡ä»¶</button>
        <div id="basic-files-result"></div>
    </div>

    <div class="test-item">
        <h3>2. APIæ¥å£æ£€æŸ¥</h3>
        <button onclick="checkAPIs()">æ£€æŸ¥APIæ¥å£</button>
        <div id="api-result"></div>
    </div>

    <div class="test-item">
        <h3>3. é¡µé¢SEOå…ƒç´ æ£€æŸ¥</h3>
        <button onclick="checkPageSEO()">æ£€æŸ¥é¡µé¢SEO</button>
        <div id="page-seo-result"></div>
    </div>

    <div class="test-item">
        <h3>4. é…ç½®æ£€æŸ¥</h3>
        <button onclick="checkConfig()">æ£€æŸ¥é…ç½®</button>
        <div id="config-result"></div>
    </div>

    <div class="test-item">
        <h3>5. è¿è¡Œå®Œæ•´éªŒè¯</h3>
        <button onclick="runFullVerification()" style="background: #28a745;">ğŸš€ å®Œæ•´éªŒè¯</button>
        <div id="full-result"></div>
    </div>

    <script>
        // æ£€æŸ¥åŸºç¡€æ–‡ä»¶
        async function checkBasicFiles() {
            const resultDiv = document.getElementById('basic-files-result');
            resultDiv.innerHTML = '<p>æ­£åœ¨æ£€æŸ¥...</p>';
            
            const files = [
                { url: '/robots.txt', name: 'robots.txt' },
                { url: '/sitemap.xml', name: 'sitemap.xml' },
                { url: '/favicon.ico', name: 'favicon.ico' }
            ];
            
            let results = '<h4>åŸºç¡€æ–‡ä»¶æ£€æŸ¥ç»“æœ:</h4>';
            
            for (const file of files) {
                try {
                    const response = await fetch(file.url, { method: 'HEAD' });
                    const status = response.ok ? 'âœ…' : 'âŒ';
                    results += `<p>${status} ${file.name}: ${response.status}</p>`;
                } catch (error) {
                    results += `<p>âŒ ${file.name}: è¿æ¥å¤±è´¥</p>`;
                }
            }
            
            resultDiv.innerHTML = results;
            resultDiv.className = 'success';
        }

        // æ£€æŸ¥APIæ¥å£
        async function checkAPIs() {
            const resultDiv = document.getElementById('api-result');
            resultDiv.innerHTML = '<p>æ­£åœ¨æ£€æŸ¥API...</p>';
            
            const apis = [
                { url: '/api/admin/seo-test', name: 'SEOæµ‹è¯•API' },
                { url: '/api/seo/keyword-ranking?action=stats', name: 'å…³é”®è¯æ’åAPI' },
                { url: '/api/seo/search-engine-submission', name: 'æœç´¢å¼•æ“æäº¤API' },
                { url: '/api/seo/404-report', name: '404ç›‘æ§API' },
                { url: '/api/analytics/web-vitals', name: 'Web Vitals API' }
            ];
            
            let results = '<h4>APIæ¥å£æ£€æŸ¥ç»“æœ:</h4>';
            
            for (const api of apis) {
                try {
                    const response = await fetch(api.url);
                    const status = response.ok ? 'âœ…' : 'âŒ';
                    results += `<p>${status} ${api.name}: ${response.status}</p>`;
                } catch (error) {
                    results += `<p>âŒ ${api.name}: è¿æ¥å¤±è´¥</p>`;
                }
            }
            
            resultDiv.innerHTML = results;
            resultDiv.className = 'warning';
        }

        // æ£€æŸ¥é¡µé¢SEOå…ƒç´ 
        function checkPageSEO() {
            const resultDiv = document.getElementById('page-seo-result');
            
            let results = '<h4>é¡µé¢SEOå…ƒç´ æ£€æŸ¥:</h4>';
            
            // æ£€æŸ¥åŸºç¡€å…ƒç´ 
            const title = document.title;
            const metaDesc = document.querySelector('meta[name="description"]');
            const canonical = document.querySelector('link[rel="canonical"]');
            const ogTitle = document.querySelector('meta[property="og:title"]');
            const jsonLd = document.querySelectorAll('script[type="application/ld+json"]');
            
            results += `<p>âœ… é¡µé¢æ ‡é¢˜: ${title}</p>`;
            results += `<p>${metaDesc ? 'âœ…' : 'âŒ'} Metaæè¿°: ${metaDesc ? 'å·²è®¾ç½®' : 'æœªè®¾ç½®'}</p>`;
            results += `<p>${canonical ? 'âœ…' : 'âŒ'} Canonical URL: ${canonical ? 'å·²è®¾ç½®' : 'æœªè®¾ç½®'}</p>`;
            results += `<p>${ogTitle ? 'âœ…' : 'âŒ'} Open Graph: ${ogTitle ? 'å·²è®¾ç½®' : 'æœªè®¾ç½®'}</p>`;
            results += `<p>${jsonLd.length > 0 ? 'âœ…' : 'âŒ'} ç»“æ„åŒ–æ•°æ®: ${jsonLd.length} ä¸ª</p>`;
            
            resultDiv.innerHTML = results;
            resultDiv.className = 'success';
        }

        // æ£€æŸ¥é…ç½®
        function checkConfig() {
            const resultDiv = document.getElementById('config-result');
            
            let results = '<h4>é…ç½®æ£€æŸ¥ç»“æœ:</h4>';
            results += '<p>â„¹ï¸ é…ç½®æ£€æŸ¥éœ€è¦åœ¨æœåŠ¡å™¨ç«¯è¿›è¡Œ</p>';
            results += '<p>è¯·æ£€æŸ¥ blog.config.js ä¸­çš„SEOç›¸å…³é…ç½®</p>';
            
            // æ£€æŸ¥ä¸€äº›å®¢æˆ·ç«¯å¯ä»¥æ£€æµ‹çš„é…ç½®æ•ˆæœ
            const hasPreload = document.querySelectorAll('link[rel="preload"]').length > 0;
            const hasLazyImages = document.querySelectorAll('img[loading="lazy"]').length > 0;
            
            results += `<p>${hasPreload ? 'âœ…' : 'âŒ'} èµ„æºé¢„åŠ è½½: ${hasPreload ? 'å·²å¯ç”¨' : 'æœªæ£€æµ‹åˆ°'}</p>`;
            results += `<p>${hasLazyImages ? 'âœ…' : 'âŒ'} å›¾ç‰‡æ‡’åŠ è½½: ${hasLazyImages ? 'å·²å¯ç”¨' : 'æœªæ£€æµ‹åˆ°'}</p>`;
            
            resultDiv.innerHTML = results;
            resultDiv.className = 'warning';
        }

        // è¿è¡Œå®Œæ•´éªŒè¯
        async function runFullVerification() {
            const resultDiv = document.getElementById('full-result');
            resultDiv.innerHTML = '<p>æ­£åœ¨è¿è¡Œå®Œæ•´éªŒè¯...</p>';
            
            // ä¾æ¬¡è¿è¡Œæ‰€æœ‰æ£€æŸ¥
            await checkBasicFiles();
            await checkAPIs();
            checkPageSEO();
            checkConfig();
            
            let summary = '<h4>ğŸ¯ å®Œæ•´éªŒè¯æ€»ç»“:</h4>';
            summary += '<p>âœ… åŸºç¡€æ–‡ä»¶æ£€æŸ¥å®Œæˆ</p>';
            summary += '<p>âš ï¸ APIæ¥å£æ£€æŸ¥å®Œæˆï¼ˆéƒ¨åˆ†å¯èƒ½éœ€è¦é…ç½®ï¼‰</p>';
            summary += '<p>âœ… é¡µé¢SEOå…ƒç´ æ£€æŸ¥å®Œæˆ</p>';
            summary += '<p>â„¹ï¸ é…ç½®æ£€æŸ¥å®Œæˆ</p>';
            summary += '<br>';
            summary += '<p><strong>ä¸‹ä¸€æ­¥å»ºè®®:</strong></p>';
            summary += '<ul>';
            summary += '<li>è®¿é—® <a href="/admin/seo-dashboard" target="_blank">/admin/seo-dashboard</a> æŸ¥çœ‹SEOä»ªè¡¨æ¿</li>';
            summary += '<li>è®¿é—® <a href="/seo-test-page" target="_blank">/seo-test-page</a> è¿è¡Œè¯¦ç»†æµ‹è¯•</li>';
            summary += '<li>æ£€æŸ¥ blog.config.js ä¸­çš„SEOé…ç½®</li>';
            summary += '<li>é…ç½®æœç´¢å¼•æ“APIå¯†é’¥ï¼ˆå¦‚éœ€è¦ï¼‰</li>';
            summary += '</ul>';
            
            resultDiv.innerHTML = summary;
            resultDiv.className = 'success';
        }

        // é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºè¯´æ˜
        window.addEventListener('load', function() {
            console.log('SEOåŠŸèƒ½éªŒè¯é¡µé¢å·²åŠ è½½');
            console.log('å»ºè®®æŒ‰é¡ºåºç‚¹å‡»å„ä¸ªæ£€æŸ¥æŒ‰é’®ï¼Œæœ€åè¿è¡Œå®Œæ•´éªŒè¯');
        });
    </script>
</body>
</html>