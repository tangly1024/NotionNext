- name: æ£€æµ‹å¹¶éƒ¨ç½²
  run: |
    set -euo pipefail
    mkdir -p .cache

    echo "ç”Ÿæˆå½“å‰ hash..."
    curl -s https://notion-api.splitbee.io/v1/page/24ee6481ffbd80e299a8c77c37baf01b | md5sum | cut -d ' ' -f1 > .cache/current.md5

    echo "è·å–ä¹‹å‰çš„ hash..."
    curl -s -o .cache/previous.md5 https://raw.githubusercontent.com/ThereChenSnow/NotionNext/main/.cache/previous.md5 || true

    if [ -s .cache/previous.md5 ] && cmp -s .cache/current.md5 .cache/previous.md5; then
      echo "âœ… å†…å®¹æ— å˜åŒ–ï¼Œè·³è¿‡éƒ¨ç½²"
      exit 0
    fi

    echo "ğŸš€ æ£€æµ‹åˆ°æ›´æ–°ï¼Œè°ƒç”¨ EdgeOne webhook..."
    curl -X POST https://pages-api.edgeone.ai/v1/webhook/32d294f9005676799bb75b8f806a098799f96995e80a9cd1c924f8515c3eba5e

    echo "æ›´æ–°å¹¶æäº¤ hash..."
    cp .cache/current.md5 .cache/previous.md5
    git config --global user.name "github-actions"
    git config --global user.email "github-actions@users.noreply.github.com"
    git pull --ff-only || true
    git add .cache/previous.md5
    git commit -m "æ›´æ–° Notion hash [skip ci]" || echo "æ— æ”¹åŠ¨å¯æäº¤"
    git push || true
